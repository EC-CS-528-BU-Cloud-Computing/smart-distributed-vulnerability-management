package communication

import (
	"fmt"
	"net/rpc"
)

type RequestMessage struct {
	Action            string // can be "fix" or "rebuild"
	VulnerabilityName string
	ImageName         string
}

type ReplyMessage struct {
	Success           bool
	VulnerabilityName string
	ImageName         string
}

func connect(serverInfo string) (*rpc.Client, error) {
	client, err := rpc.DialHTTP("tcp", serverInfo)
	if err != nil {
		fmt.Println("Dial HTTP ERROR")
		return nil, err
	}
	return client, nil
}

// todo: implement sendMessage
func sendMessage(serverInfo string, requestMessage RequestMessage) error {
	// send rpc message to the image server for fix/rebuild an image
	// wait for reply
	return nil
}
